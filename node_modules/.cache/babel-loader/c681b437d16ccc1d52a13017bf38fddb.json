{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { client } from '../../api/client';\nexport const fetchNotifications = createAsyncThunk('notifications/fetchNotification', async (_, _ref) => {\n  let {\n    getState\n  } = _ref;\n  const allNotifications = selectAllNotifications(getState());\n  const [latestNotification] = allNotifications;\n  const latestTimestamp = latestNotification ? latestNotification.date : '';\n  const response = await client.get(`/fakeApi/notifications?since=${latestTimestamp}`);\n  return response.notifications;\n});\nconst notificationsSlice = createSlice({\n  name: 'notifications',\n  initialSlice: [],\n  reducers: {},\n  extraReducers: {\n    [fetchNotifications.fulfilled]: (state, action) => {\n      state.push(...action.payload);\n      state.sort((a, b) => b.date.localeCompare(a.date));\n    }\n  }\n});\nexport default notificationsSlice.reducer;\nexport const selectAllNotifications = state => state.notifications;","map":{"version":3,"names":["createAsyncThunk","createSlice","client","fetchNotifications","_","getState","allNotifications","selectAllNotifications","latestNotification","latestTimestamp","date","response","get","notifications","notificationsSlice","name","initialSlice","reducers","extraReducers","fulfilled","state","action","push","payload","sort","a","b","localeCompare","reducer"],"sources":["/Users/ozge/Desktop/social-media-app/src/features/notifications/notificationsSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'\nimport { client } from '../../api/client'\n\nexport const fetchNotifications = createAsyncThunk(\n  'notifications/fetchNotification',\n  async (_, { getState }) => {\n    const allNotifications = selectAllNotifications(getState())\n    const [latestNotification] = allNotifications\n\n    const latestTimestamp = latestNotification ? latestNotification.date : ''\n    const response = await client.get(\n      `/fakeApi/notifications?since=${latestTimestamp}`\n    )\n    return response.notifications\n  }\n)\n\nconst notificationsSlice = createSlice({\n  name: 'notifications',\n  initialSlice: [],\n  reducers: {},\n  extraReducers: {\n    [fetchNotifications.fulfilled]: (state, action) => {\n      state.push(...action.payload)\n      state.sort((a, b) => b.date.localeCompare(a.date))\n    },\n  },\n})\n\nexport default notificationsSlice.reducer\n\nexport const selectAllNotifications = (state) => state.notifications\n"],"mappings":"AAAA,SAASA,gBAAT,EAA2BC,WAA3B,QAA8C,kBAA9C;AACA,SAASC,MAAT,QAAuB,kBAAvB;AAEA,OAAO,MAAMC,kBAAkB,GAAGH,gBAAgB,CAChD,iCADgD,EAEhD,OAAOI,CAAP,WAA2B;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EACzB,MAAMC,gBAAgB,GAAGC,sBAAsB,CAACF,QAAQ,EAAT,CAA/C;EACA,MAAM,CAACG,kBAAD,IAAuBF,gBAA7B;EAEA,MAAMG,eAAe,GAAGD,kBAAkB,GAAGA,kBAAkB,CAACE,IAAtB,GAA6B,EAAvE;EACA,MAAMC,QAAQ,GAAG,MAAMT,MAAM,CAACU,GAAP,CACpB,gCAA+BH,eAAgB,EAD3B,CAAvB;EAGA,OAAOE,QAAQ,CAACE,aAAhB;AACD,CAX+C,CAA3C;AAcP,MAAMC,kBAAkB,GAAGb,WAAW,CAAC;EACrCc,IAAI,EAAE,eAD+B;EAErCC,YAAY,EAAE,EAFuB;EAGrCC,QAAQ,EAAE,EAH2B;EAIrCC,aAAa,EAAE;IACb,CAACf,kBAAkB,CAACgB,SAApB,GAAgC,CAACC,KAAD,EAAQC,MAAR,KAAmB;MACjDD,KAAK,CAACE,IAAN,CAAW,GAAGD,MAAM,CAACE,OAArB;MACAH,KAAK,CAACI,IAAN,CAAW,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAAChB,IAAF,CAAOiB,aAAP,CAAqBF,CAAC,CAACf,IAAvB,CAArB;IACD;EAJY;AAJsB,CAAD,CAAtC;AAYA,eAAeI,kBAAkB,CAACc,OAAlC;AAEA,OAAO,MAAMrB,sBAAsB,GAAIa,KAAD,IAAWA,KAAK,CAACP,aAAhD"},"metadata":{},"sourceType":"module"}